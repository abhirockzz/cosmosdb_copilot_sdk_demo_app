# ============================================
# Copilot CLI - Headless Server Docker Image
# ============================================
# Runs the GitHub Copilot CLI in headless mode
# as a TCP server for the Copilot Go SDK to connect to.
#
# Requires GITHUB_TOKEN env var (PAT with Copilot Requests permission).
# ============================================

FROM node:22-slim

RUN apt-get update && apt-get install -y --no-install-recommends ca-certificates && rm -rf /var/lib/apt/lists/*

RUN npm install -g @github/copilot

EXPOSE 4321

ENTRYPOINT ["copilot", "--headless", "--port", "4321"]
